---
title: 关于git的子模块
date: 2018-11-08 16:41:13
tags:
- git
categories:  
- git
---

## 子模块概念以下引用自[git官网](https://git-scm.com/book/zh/v1/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97)

> 经常有这样的事情，当你在一个项目上工作时，你需要在其中使用另外一个项目。也许它是一个第三方开发的库或者是你独立开发和并在多个父项目中使用的。这个场景下一个常见的问题产生了：你想将两个项目单独处理但是又需要在其中一个中使用另外一个。  
> 这里有一个例子。假设你在开发一个网站，为之创建Atom源。你不想编写一个自己的Atom生成代码，而是决定使用一个库。你可能不得不像CPAN install或者Ruby gem一样包含来自共享库的代码，或者将代码拷贝到你的项目树中。如果采用包含库的办法，那么不管用什么办法都很难去定制这个库，部署它就更加困难了，因为你必须确保每个客户都拥有那个库。把代码包含到你自己的项目中带来的问题是，当上游被修改时，任何你进行的定制化的修改都很难归并。
> `Git` 通过子模块处理这个问题。子模块允许你将一个 `Git` 仓库当作另外一个`Git`仓库的子目录。这允许你克隆另外一个仓库到你的项目中并且保持你的提交相对独立。  

## 什么时候会用到子模块这个概念呢？

### 提交到远程

我们什么时候会用到`git`子模块呢？

我最近自己搭建我的博客的时候，下载了第三方的主题库。这边用到的是[yilia](https://github.com/litten/hexo-theme-yilia)，具体该库的详细使用方法可以点击`yilia`来获取作者的`README`文档。

下载第三方库在本地运行，配置都是OK的。我想到如果想要跨设备书写博客呢？于是就在我的`git`仓库中创建了一个备份博客源码的仓库。执行下面的命令

```git 提交命令
git init
git add .

```

在执行`git add .`命令的时候，控制台显示这样一个异常  
大概意思就是。您添加的文件中包含另一个`git`仓库，是你操作失误还是需要添加至子模块。

看到这个异常一脸懵逼的我立马去谷歌下什么是`git`的子模块。在查询资料之后。我理解的子模块就是，在一个项目中的某个文件夹中包含另一个需要与远程源保持关联的又一个`git`项目。

于是乎我就执行了以下的命令

```git添加子模块
git submodule add [source] [folder]

```

接着就会在当前项目的根目录下添加一个`.gitmodules`文件，这个文件会记录你的子模块的相关信息。然后执行以下命令就可以将代码提交到远程  

```提交git代码
git commit -m update[new_submodule]
git pull
git push
```

至此你的代码已经提交到了远程。

### 从远程将项目拉回来

代码已经提交到远程之后，如何来将远程仓库的完整代码拉回到本地呢？

正常我们是直接执行如下命令就好

```拉取代码
git clone [仓库地址]
```

执行完成以上的命令之后在本地就会有你的代码了。但是这时候你会发现，你的代码的子模块虽然在远程的仓库是有数据的。但是在你本地只是一个文件夹而已。

接下来怎么操作呢？？执行如下的代码就可有将子模块的代码拉取到本地

```拉取子模块代码
git submodule init
git submodule update
```

至此你的本地就有了你的远程的完整的代码了。  

### 总结

- 在遇到`git`提示的时候认真查看提示
- 使用好相关搜索工具

`git`的常用命令可以[点击这里](/2018/11/06/git常用命令集合)查看我之前的博客
